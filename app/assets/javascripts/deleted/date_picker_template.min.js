var DATE_PICKER=DATE_PICKER||{};DATE_PICKER.shortcut_count=0;DATE_PICKER.date_picker_template=function(){};DATE_PICKER.date_picker_template.prototype={constructor:DATE_PICKER.date_picker_template,weekStart:1,autoclose:true,todayBtn:false,clearBtn:false,todayHighlight:true,language:"en",forceParse:false,datePicker:function(){$(this.target).datepicker("remove");$(this.target).datetimepicker("remove");if(this.name=="hour"){$(this.target).datetimepicker({weekStart:this.weekStart,autoclose:this.autoclose,todayBtn:this.todayBtn,clearBtn:this.clearBtn,todayHighlight:this.todayHighlight,language:this.language,forceParse:this.forceParse,format:this.format,calendarWeeks:this.calendarWeeks,startView:this.startView,minViewMode:this.minViewMode,minView:this.minView,initialDate:this.initialDate})}else{$(this.target).datepicker({weekStart:this.weekStart,autoclose:this.autoclose,todayBtn:this.todayBtn,clearBtn:this.clearBtn,todayHighlight:this.todayHighlight,language:this.language,forceParse:this.forceParse,format:this.format,calendarWeeks:this.calendarWeeks,startView:this.startView,minViewMode:this.minViewMode,minView:this.minView,initialDate:this.initialDate})}this.init_company(this.target,this.name,this.shortcut,this.startIndex,this.dynamic_input,this.select_name)},init_company:function(f,c,a,b,e,d){if(c=="hour"){$(f).datetimepicker().one("show",function(){if(a!=undefined&&$(".table-condensed").attr("already-have-shortcut")!="yes"){DATE_PICKER.shortcut_form(7,c,f,a,b,e,d)}$(this.target).datepicker("remove");$(".datepicker").remove()});$(f).datetimepicker().on("change",function(){$(this).attr("hide_value",$(this).val());$(this).attr("hide_post",$(this).val());if($(this).attr("string_model","yes")){$(this).attr("string_model","no");DATE_PICKER.shortcut_supervise(f)}})}else{$(f).datepicker().one("show",function(){$(".datepicker").find(".prev").text("").append($("<i />").addClass("icon-arrow-left"));$(".datepicker").find(".next").text("").append($("<i />").addClass("icon-arrow-right"));$(this.target).datetimepicker("remove");$(".datetimepicker").remove();if(a!=undefined&&$(".table-condensed").attr("already-have-shortcut")!="yes"){if(c=="week"){DATE_PICKER.shortcut_form(8,c,f,a,b,e,d)}else{DATE_PICKER.shortcut_form(7,c,f,a,b,e,d)}}});$(f).datepicker().on("show",function(){if(c=="week"){$(".datepicker-days").find(".active").parent().addClass("week-tr-active");$(".datepicker").bind("click",function(){$(".datepicker-days").find(".active").parent().addClass("week-tr-active")});$(".datepicker-days").attr("week","picker")}else{$(".datepicker-days").find(".active").parent().removeClass("week-tr-active");$(".datepicker-days").attr("week","")}});$(f).datepicker().on("change",function(){$(this).attr("hide_value",$(this).val());$(this).attr("hide_post",$(this).val());if($(this).attr("string_model","yes")){$(this).attr("string_model","no");DATE_PICKER.shortcut_supervise(f)}})}}};DATE_PICKER["90"]=function(a){this.target=a;this.name="hour";this.startIndex=0;this.shortcut=arguments[1];this.format="yyyy-mm-dd hh:ii";this.calendarWeeks=undefined;this.startView="month";this.minViewMode=undefined;this.minView="day";this.initialDate=new Date(new Date().setMinutes(0));this.dynamic_input="8";this.select_name="Hours";this.interval="90"};DATE_PICKER["90"].prototype=DATE_PICKER.date_picker_template.prototype;DATE_PICKER["90"].prototype.constructor=DATE_PICKER["90"];DATE_PICKER["100"]=function(a){this.target=a;this.name="day";this.startIndex=1;this.shortcut=arguments[1];this.format="yyyy-mm-dd";this.calendarWeeks=false;this.startView="month";this.minViewMode="days";this.minView=undefined;this.initialDate=undefined;this.dynamic_input="7";this.select_name="Days";this.interval="100"};DATE_PICKER["100"].prototype=DATE_PICKER.date_picker_template.prototype;DATE_PICKER["100"].prototype.constructor=DATE_PICKER["100"];DATE_PICKER["200"]=function(a){this.target=a;this.name="week";this.startIndex=2;this.shortcut=arguments[1];this.format="yyyy-mm-dd";this.calendarWeeks=true;this.startView="month";this.minViewMode="days";this.minView=undefined;this.initialDate=undefined;this.dynamic_input="4";this.select_name="Weeks";this.interval="200"};DATE_PICKER["200"].prototype=DATE_PICKER.date_picker_template.prototype;DATE_PICKER["200"].prototype.constructor=DATE_PICKER["200"];DATE_PICKER["300"]=function(a){this.target=a;this.name="month";this.startIndex=3;this.shortcut=arguments[1];this.format="yyyy-mm";this.calendarWeeks=false;this.startView="year";this.minViewMode="months";this.minView=undefined;this.initialDate=undefined;this.dynamic_input="3";this.select_name="Months";this.interval="300"};DATE_PICKER["300"].prototype=DATE_PICKER.date_picker_template.prototype;DATE_PICKER["300"].prototype.constructor=DATE_PICKER["300"];DATE_PICKER["400"]=function(a){this.target=a;this.name="quarter";this.startIndex=4;this.shortcut=arguments[1];this.format="yyyy-mm";this.calendarWeeks=false;this.startView="year";this.minViewMode="months";this.minView=undefined;this.initialDate=undefined;this.dynamic_input="3";this.select_name="Quarters";this.interval="400"};DATE_PICKER["400"].prototype=DATE_PICKER.date_picker_template.prototype;DATE_PICKER["400"].prototype.constructor=DATE_PICKER["400"];DATE_PICKER["500"]=function(a){this.target=a;this.name="year";this.startIndex=5;this.shortcut=arguments[1];this.format="yyyy";this.calendarWeeks=false;this.startView="decade";this.minViewMode="years";this.minView=undefined;this.initialDate=undefined;this.dynamic_input="2";this.select_name="Years";this.interval="500"};DATE_PICKER["500"].prototype=DATE_PICKER.date_picker_template.prototype;DATE_PICKER["500"].prototype.constructor=DATE_PICKER["500"];DATE_PICKER.shortcut_form=function(e,c,g,a,b,f,d){$(".table-condensed").attr("already-have-shortcut","yes").find("tfoot").append($("<tr />").addClass("date-pick-dynamic-today").attr("id","date-pick-dynamic-today").append($("<th />").attr("colSpan",e).text("Today")).hover(function(){$(this).css("backgroundColor","#eee")},function(){$(this).css("backgroundColor","white")}).on("click",function(){date_shortcut_today(g,a,c)})).append($("<tr />").addClass("relative").append($("<th />").attr("colSpan",e).addClass("date-picker-shortcut").attr("interval",c)).hover(function(){$(".date-pick-dynamic").css("display","block")}).append($("<i />").addClass("icon-caret-right"))).append($("<tr />").addClass("absolute date-pick-dynamic").attr("interval",c).append($("<i />").addClass("icon-remove").hover(function(){$(this).css("color","rgba(0,0,0,0.85)")},function(){$(this).css("color","rgba(0,0,0,0.4)")}).on("click",function(){$(".date-pick-dynamic").css("display","none")})).append($("<div />").attr("id","date-pick-dynamic-div").append($("<p />").text("Last")).append($("<input type='text' />")).append($("<select />").css("width","100px").append($("<option />").text("Hours").attr("value","Hours").attr("index","0")).append($("<option />").text("Days").attr("value","Days").attr("index","1")).append($("<option />").text("Weeks").attr("value","Weeks").attr("index","2")).append($("<option />").text("Months").attr("value","Months").attr("index","3")).append($("<option />").text("Quarters").attr("value","Quarters").attr("index","4")).append($("<option />").text("Years").attr("value","Years").attr("index","5")))).append($("<a />").addClass("btn btn-primary").text("OK").attr("id","date-pick-dynamic-button").on("click",function(){date_shortcut(c,g,a,b)})));$("#date-pick-dynamic-today:visible").prevAll().remove();$("#date-pick-dynamic-div>input").val(f);$("#date-pick-dynamic-div>select").find("option[value='"+d+"']").prop("selected",true).prevAll().remove();$("body").on("keyup","#date-pick-dynamic-div>input",function(i){var h=adapt_event(i).target;clearNoNum(h)})};function date_shortcut_today(h,a,c){var b=h.replace(",","").split("#"),g,f=h,j=new Date().toWayneString().day,e=[new Date(new Date().setHours(0)).toWayneString().hour,new Date().toWayneString().hour];if(a=="date"){for(g=1;g<b.length;g++){var h="#"+b[g];if($(".datepicker").length>0){$(h).datepicker("update",new Date().toWayneString()[c])}else{$(h).datetimepicker("update",e[g-1]);$(h).attr("hide_value",e[g-1]);$(h).attr("hide_post",e[g-1])}$(h).val(j)}$(f).attr("string_model","yes").attr("interval","100");DATE_PICKER.shortcut_count=b.length-1}else{if(a=="string"){for(g=1;g<b.length;g++){var h="#"+b[g];if($(".datepicker").length>0){$(h).datepicker("update",new Date().toWayneString()[c])}else{$(h).datetimepicker("update",e[g-1]);$(h).attr("hide_value",e[g-1]);$(h).attr("hide_post",e[g-1])}$(h).val("TODAY")}$(f).attr("string_model","yes").attr("interval","100");DATE_PICKER.shortcut_count=b.length-1}}$(".date-pick-dynamic").css("display","none");if(c=="hour"){$(f).datetimepicker("hide")}else{$(f).datepicker("hide")}}function date_shortcut(a,n,f,k){var h=parseInt($("#date-pick-dynamic-div:visible :selected").attr("index")),l=$("#date-pick-dynamic-div:visible>input").val(),b=$("#date-pick-dynamic-div :selected").attr("value"),p=n;if(l.length==0){MessageBox("Fill the blank after the word 'Last' please","top","warning")}else{var e=DATE_PICKER.shortcut_model(h,l,b);var d=n.replace(",","").split("#"),g;if(f=="date"){for(g=1;g<d.length;g++){var n="#"+d[g],c=e[h].date[g-1],m=e[h].datePost(a)[g-1];e[h].update(n,m);$(n).val(c).attr("string_model","yes")}$(p).attr("interval",e[h].datePost(a)[2]);DATE_PICKER.shortcut_count=d.length-1}else{if(f=="string"){for(g=1;g<d.length;g++){var n="#"+d[g],c=e[h].date[g-1],m=e[h].datePost(a)[g-1];e[h].update(n,m);$(n).val(e[h].string);$(n).attr("hide_value",m).attr("string_model","yes");var j=l,o=b.toUpperCase().slice(0,-1);if(o=="QUARTER"){j=parseInt(j)*3;o="MONTH"}$(n).attr("hide_post","LAST"+j+o)}$(p).attr("interval",e[h].datePost(a)[2]);DATE_PICKER.shortcut_count=d.length-1}}$(".date-pick-dynamic").css("display","none");if(a=="hour"){$(p).datetimepicker("hide")}else{$(p).datepicker("hide")}}}DATE_PICKER.shortcut_supervise=function(b){DATE_PICKER.shortcut_count--;if(DATE_PICKER.shortcut_count==1){var b=b.split(","),a;for(a=0;a<b.length;a++){$(b[a]).val($(b[a]).attr("hide_value")).attr("interval","");$(b[a]).attr("hide_post",$(b[a]).attr("hide_value"))}}};DATE_PICKER.shortcut_model=function(d,f,b){var h=new Date().toWayneString(),g=new Date(new Date().setHours(new Date().getHours()-f)).toWayneString().hour,a=new Date(new Date().setDate(new Date().getDate()-f)).toWayneString().day,c=new Date(new Date().setDate(new Date().getDate()-f*7)).toWayneString().day,e=new Date(new Date().setMonth(new Date().getMonth()-f)).toWayneString().month,j=new Date(new Date().setMonth(new Date().getMonth()-f*3)).toWayneString().month,i=new Date(new Date().setFullYear(new Date().getFullYear()-f)).toWayneString().year;return{"0":{date:[g,h.hour],datePost:function(k){var l=standardParse(this.date[0]).date.toWayneString()[k],m=standardParse(this.date[1]).date.toWayneString()[k];return[l,m,"90"]},string:"Last "+f+" "+b,update:function(l,k){if($(".datetimepicker").length==0){$(l).datepicker("update",k)}else{$(l).datetimepicker("update",k)}}},"1":{date:[a,h.day],datePost:function(k){var l=standardParse(this.date[0]).date.toWayneString()[k],m=standardParse(this.date[1]).date.toWayneString()[k];return[l,m,"100"]},string:"Last "+f+" "+b,update:function(l,k){if($(".datetimepicker").length==0){$(l).datepicker("update",k)}else{$(l).datetimepicker("update",k)}}},"2":{date:[c,h.day],datePost:function(k){var l=standardParse(this.date[0]).date.toWayneString()[k],m=standardParse(this.date[1]).date.toWayneString()[k];return[l,m,"200"]},string:"Last "+f+" "+b,update:function(l,k){if($(".datetimepicker").length==0){$(l).datepicker("update",k)}else{$(l).datetimepicker("update",k)}}},"3":{date:[e,h.month],datePost:function(k){var l=standardParse(this.date[0]).date.toWayneString()[k],m=standardParse(this.date[1]).date.toWayneString()[k];return[l,m,"300"]},string:"Last "+f+" "+b,update:function(l,k){if($(".datetimepicker").length==0){$(l).datepicker("update",k)}else{$(l).datetimepicker("update",k)}}},"4":{date:[j,h.month],datePost:function(k){var l=standardParse(this.date[0]).date.toWayneString()[k],m=standardParse(this.date[1]).date.toWayneString()[k];return[l,m,"400"]},string:"Last "+f+" "+b,update:function(l,k){if($(".datetimepicker").length==0){$(l).datepicker("update",k)}else{$(l).datetimepicker("update",k)}}},"5":{date:[i,h.year],datePost:function(k){var l=standardParse(this.date[0]).date.toWayneString()[k],m=standardParse(this.date[1]).date.toWayneString()[k];return[l,m,"500"]},string:"Last "+f+" "+b,update:function(l,k){if($(".datetimepicker").length==0){$(l).datepicker("update",k)}else{$(l).datetimepicker("update",k)}}}}};