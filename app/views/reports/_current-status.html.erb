<section id="current-status">
  <section id="current-status-normal">
    <div class=" col-sm-12" id="current-status-header" style="background: #fefefe;border-bottom: 4px solid #000;">
      <div class="col-sm-4" style="padding-top: 10px;border-right: 1px solid #ccc;">
        <label>Condition</label>

        <p>CycleTime Current Status Block Chart</p>

        <p id="current-date" style="font-size: 12px;"></p>
      </div>

      <div class="col-sm-4" style="padding-top: 10px;border-right: 1px solid #ccc;">
        <p>Product Line</p>
        <select id="vehicle-select" style="min-width: 200px;text-align: center;">
          <% Department.where(is_product_line: true).each do |p| %>
              <option value="<%= p.id %>"><%= p.name %></option>
          <% end %>
        </select>
      </div>
      <div class="col-sm-4" style="text-align: center;">
        <label>Current time</label>

        <p id="current-clock" style="font-size: 30px;font-weight: bold;"></p>
      </div>
    </div>

    <div class="col-sm-12">
      <ul class="pull-right control-chart-interval-group">
        <li interval="100" style="color:black;" datatype='true'>
          <a>D</a>
        </li>
        <li interval="300">
          <a>M</a>
        </li>
        <li interval="400">
          <a>Qr</a>
        </li>
        <li interval="500">
          <a>Y</a>
        </li>
      </ul>
    </div>

    <div class="col-sm-12">
      <div id="data_container" class="data-container"></div>
    </div>

    <div class="download-groups col-sm-12" id="download">
      <div class="download-panel" style="display: none;margin-top: 20px;">
        <h4 style="font-size: 17px;color: #666; top: 15px;left: 10px;">
          Download Excel
        </h4>
        <div style="margin-top: 20px; display: inline-block">
          <form method="get" action="/departments/download_cycle_time_detail">
            <input type="hidden" name="product_line" id="product_line_id"/>
            <input type="text" readonly class="datetimepicker" id="start_time" name="start_time" title="Start Time">&emsp;
            <b>~</b> &emsp;
            <input type="text" readonly class="datetimepicker" id="end_time" name="end_time" title="End Time">
            <input type="submit" class=" btn-primary" style="width: 150px;height: 38px;" value="Download"/>
          </form>
        </div>

      </div>

      <div id="pop-download" style="text-align: center;width: 100%;
          color: white;cursor: pointer;height: 13px;background: #e5e5e5;position: relative;">
        <div class="my_icon">
          <i class="icon-chevron-up" style="color: #3e4452;" title="Close Panel"></i>
        </div>
      </div>
    </div>
  </section>
</section>

<% content_for :javascript_includes do %>
    <%= javascript_include_tag "reports/current_status" %>
    <%= javascript_include_tag "reports/defects" %>
<% end %>

<script type="text/javascript" charset="utf-8">
  current_status.init();

  jeDate({
    dateCell: "#start_time",
    isinitVal: true,
    isTime: true, //isClear:false,
    minDate: "2014-09-19 00:00:00"
  });
  jeDate({
    dateCell: "#end_time",
    isinitVal: true,
    isTime: true, //isClear:false,
    minDate: "2014-09-19 00:00:00"
  });

  IntervalGroup('.control-chart-interval-group');

  $('#pop-download').click(function () {
    $('.download-panel').fadeToggle(0);
    initDownload();
  });

  $("#vehicle-select").change(function () {
    var productLine = $('#vehicle-select').val();
    localStorage.box_msg = "Line_" + productLine + "_interval_100" + "_box_0";
    loadData(productLine, 100);
  });

</script>

<style>
  /*Box Start*/
  .box {
    min-width: 230px;
    height: 165px;
    border-radius: 10px;
    /*border: 2px solid #9000ff;*/
    border: 2px solid deepskyblue;
    margin: 10px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  .box-title {
    height: 50px;
    line-height: 50px;
    background: #545D70;
    color: #fefefe;
    font-size: 24px;
    text-align: center;
    border-top-right-radius: 7px;
    border-top-left-radius: 7px;
    padding-left: 30px;
    padding-right: 30px;
    cursor: pointer;
    display: flex;
    position: relative;
  }

  .box-title > span {
    width: 100%;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  .box-title > i {
    font-size: .8em;
    display: none;
    margin-top: 10px;
    margin-right: 5px;
    color: lightblue;
  }

  .box-content {
    display: flex;
    margin: 0;
    padding: 0;
    width: 100%;
  }

  .left-number {
    float: left;
    font: 50px 'Helvetica';
    height: 100px;
    line-height: 100px;
    color: #3ed436;
    margin-left: 0;
    width: 50%;
    text-align: center;
  }

  .right-content {
    float: left;
    width: 45%;
    height: 100px;
    text-align: right;
    margin-right: 5px;
  }

  .content:first-child {
    margin: 5px 0 0 20px;
  }

  .content > strong {
    font: 24px 'Helvetica';
    color: #5c5c5c;
  }

  .content > p {
    font: 14px 'HelveticaCondensed';
    color: #bfbfbf;
  }

  /*Box End*/
  @font-face {
    font-family: 'HelveticaCondensed';
    src: url('/assets/HelveticaCondensed.eot');
    src: url('/assets/HelveticaCondensed.eot') format('embedded-opentype'),
    url('/assets/HelveticaCondensed.woff2') format('woff2'),
    url('/assets/HelveticaCondensed.woff') format('woff'),
    url('/assets/HelveticaCondensed.ttf') format('truetype'),
    url('/assets/HelveticaCondensed.svg#HelveticaCondensed') format('svg');
  }
</style>