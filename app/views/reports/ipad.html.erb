<%= @from_ipad %>
from ipad:<input type="text" value="<%= @from_ipad %>" id="from_ipad">
report id: <input type="text" value="<%= @part %>" id="part"/>
entity_group id: <input type="text" value="29" id="entity_group_id"/>

<div class="report-content" id="report-content">
</div>

<% content_for :javascript_includes do %>
    <%= javascript_include_tag "func-module/format_time.js" %>
    <%= javascript_include_tag "func-module/i_check" %>
    <%= javascript_include_tag "preload/classie.js" %>
    <%= javascript_include_tag "xml2json" %>
    <%= javascript_include_tag "reports/report.js" %>
    <%= javascript_include_tag "reports/report_center" %>
    <%= javascript_include_tag "reports/main.js" %>
    <%= javascript_include_tag "reports/snap" %>
    <%= javascript_include_tag "func-module/chosen" %>
    <%= javascript_include_tag "dhtmlx" %>
    <%= javascript_include_tag "dhtmlx-extend" %>
    <%= javascript_include_tag "reports/report_menu" %>
    <%= javascript_include_tag "reports/rand" %>
    <%= javascript_include_tag "reports/data-current-status" %>
    <%= javascript_include_tag "reports/sample_data" %>
    <%= javascript_include_tag "reports/html2canvas" %>
    <%= javascript_include_tag "reports/canvas2image" %>
    <%= javascript_include_tag "reports/base64" %>
    <%= javascript_include_tag "reports/current_status" %>
    <%= javascript_include_tag "reports/defects" %>
    <%= javascript_include_tag "highstock" %>
    <%= javascript_include_tag "Highchart/Highchart_generator" %>
    <%= javascript_include_tag "reports/daily_dpv" %>
    <%= javascript_include_tag "reports/daily_ftq" %>
    <%= javascript_include_tag "reports/report_subscription" %>
    <%= javascript_include_tag "reports/report_subscription_data" %>
    <%= javascript_include_tag "reports/station_data" %>
    <%= javascript_include_tag "bootstrap-datepicker" %>
    <%= javascript_include_tag "jedate" %>
<% end %>
<script type="text/javascript">
  $(document).ready(function () {
    var part = $('#part').val();
    console.log(part);
    ReportMenu.click(part, function (data) {
      $("#report-content").html(data);
      if (typeof href != 'undefined') {
        window.location.href = href;
      }
    });
  });

  function startTime() {
    var today = new Date();
    var years = today.getFullYear();
    var months = today.getMonth();
    var d = today.getDate();
    var h = today.getHours();
    var m = today.getMinutes();
    var s = today.getSeconds();
    months = months + 1;
    months = checkTime(months);
    d = checkTime(d);
    m = checkTime(m);
    s = checkTime(s);
    try {
      document.getElementById('current-clock').innerHTML = years + "-" + months + "-" + d + " " + " " + h + ":" + m + ":" + s;
    } catch (e) {
      return;
    }
  }

  function checkTime(i) {
    if (i < 10) {
      i = "0" + i;
    }
    return i;
  }

  function startRecentTime() {
    var start_time;
    if ($('.RecentTime').val() == "") {
      start_time = new Date().format('yyyy-MM-dd').toString() + ' ' + '00:00:00';
    } else {
      if ($('.RecentTime').val() < 0) {
        $('.RecentTime').val(" ");
        start_time = new Date().format('yyyy-MM-dd').toString() + ' ' + '00:00:00';
      } else {
        var now = RefreshRectentTimeDate($('.RecentTime').val(), "m");
        start_time = now.getFullYear() + "-" + checkTime(now.getMonth() + 1) + "-" + checkTime(now.getDate()) + ' ' + checkTime(now.getHours()) + ':' + checkTime(now.getMinutes()) + ':' + checkTime(now.getSeconds());
      }
    }
    return start_time;
  }

  function RefreshRectentTimeDate(time, type) {
    //换算时间
    var end_time = new Date();
    var start_time;
    switch (type) {
      case "m":
        start_time = new Date(Date.parse(end_time) - time * 60 * 1000);
        return start_time;
        break;
      case "h":
        start_time = new Date(Date.parse(end_time) - time * 60 * 60 * 1000);
        return start_time;
        break;
      case "d":
        start_time = new Date(Date.parse(end_time) - time * 24 * 60 * 60 * 1000);
        return start_time;
        break;
      default:
        start_time = new Date(Date.parse(end_time) - time * 60 * 1000);
        return start_time;
        break;
    }
  }
</script>