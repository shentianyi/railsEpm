
<div class="sub-middle db-sub-middle">

</div>
<div class="dashBlock " id="addBlock" data-state="off" style="display:none">
  <h4 class="text-center light-gray">创建视图</h4>
  <table class="dashBoard-condition">
    <tr>
      <td>*视图名称</td>
      <td><input type="text" id="view_name_input"/></td>
    </tr>
    <tr>
      <td>视图描述</td>
      <td><input type="text" id="view_title_input" class="db-photoDesc"/></td>
    </tr>
    <tr>
      <td>KPI类别</td>
      <td>
        <%= select_tag :category_id,options_from_collection_for_select(@categories,'id','name'),
                       {:id=>'chart-group',:class=>"pull-left conditionPart-group",:onchange=>"kpi_entries_reinit_by_category('chart-group','kpi-select','chart-kpi','pull-left')"}%>

        </select>
      </td>
    </tr>
    <tr>
      <td>*KPI名称</td>
      <td>


        <select class="pull-left" id="chart-kpi">
          <%@kpis.each do |kpi|%>
              <option value="<%= kpi.id%>" interval="<%= kpi.frequency%>"><%= kpi.name%></option>
          <%end%>
        </select>

      </td>
    </tr>
    <tr>
      <td>*观察点</td>
      <td>

        <%= select_tag :entity_group,options_from_collection_for_select(@entity_groups,'id','name'),{:id=>'chart-view',:class=>'pull-left conditionPart-entity'}%>

      </td>
    </tr>
    <tr>
      <td>*开始时间</td>
      <td>
        <input type="text" readonly="true" id="from" class="analytics-date"/>
        <input placeholder="时间" type="text" readonly="true" id="fromTime" class="analytics-time"/>
      </td>
    </tr>
    <tr>
      <td>*结束时间</td>
      <td>
        <input  type="text" readonly="true" id="to" class="analytics-date"/>
        <input placeholder="时间" type="text" readonly="true" id="toTime" class="analytics-time"/>
      </td>
    </tr>
    <tr>
      <td>*分析方式</td>
      <td>
        <input type="radio" name="chartRadios" checked><span class="analyticType-radio">以综合值分析</span>
        <br />
        <input type="radio" name="chartRadios" ><span class="analyticType-radio">以平均值分析</span>
      </td>
    </tr>
  </table>
  <div class="chooseChart-wrap clearfix">
    <div class="choose-db-item db-chart-line pull-left" onclick="dashNew_chooseType(event)"><label>折线图</label></div>
    <div class="choose-db-item db-chart-column pull-left" onclick="dashNew_chooseType(event)"><label>直方图</label></div>
    <div class="choose-db-item db-chart-pie pull-left" onclick="dashNew_chooseType(event)"><label>饼图</label></div>
  </div>

  <div class="chooseBtn-wrap clearfix">
    <a class="btn dashboard-condition-btn pull-left" onclick="close_dash()">取消</a>
    <a class="btn btn-primary dashboard-condition-btn pull-left" onclick="db_view_create(prepare_to_create_db_view())">添加</a>
  </div>
</div>



<div class="middle clearfix">
  <!--左边的categories-->
  <div class="left-category pull-left">
    <ul class="manage-group" id="sty-dashboards">
      <li><h3 class="no-margin">视角</h3></li>
      <%@dashboards.each do |dashboard| %>
          <li class="sty-db-node" obj_id=<%=dashboard.id%>  >
            <i class="icon-remove hide pull-left"  onclick="dashboard_delete(<%=dashboard.id%>)"></i>
            <a href="#" onclick="select_dashboard(<%=dashboard.id%>)"><%=dashboard.name%></a>
           </li>

      <%end%>
      </ul>
    <ul class="manage-group">
      <li><button class="btn btn-primary" onclick="create_entityBlock()">创建新视角</button></li>
      <div class="absolute creat-entity-block hide" id="creatEntity-block">
        <p>创建新视角</p>
        <i class="icon-remove pull-right" onclick="close_createEntity()"></i>
        <input type="text" id="creat-newEntity" onkeyup="if(event.keyCode==13){dashboard_create({name:$(this).val()})}"/>
      </div>
     <!-- <div class="absolute creat-entity-block hide" id="edit-block">
        <p>修改视角</p>
        <i class="icon-remove pull-right" onclick="close_editBlock()"></i>
        <input type="text" id="change-leftNavi" onkeyup="change_leftNavi(event)"/>
      </div>-->
    </ul>
  </div>

  <div class="pull-left dashboard-block">
    <a class="btn btn-wzx btn-primary dashboard-addNew-btn" onclick="showDash_new()"><i class="icon-plus icon-white"></i> 视图</a>
    <ul class="dashBoard-show" id="dashBoard-show">
      <li>
        <div class="dashboard-eachDetail relative">



          <table class="table table-bordered table-striped db-itemInfo">
            <tr>
              <td>视图名称</td>
              <td></td>
            </tr>
            <tr>
              <td>KPI名称</td>
              <td></td>
            </tr>
            <tr>
              <td>观察点</td>
              <td></td>
            </tr>
            <tr>
              <td>开始时间</td>
              <td>2013-03-03 23:00:00</td>
            </tr>
            <tr>
              <td>结束时间</td>
              <td></td>
            </tr>
            <tr>
              <td>计算方式</td>
              <td></td>
            </tr>
          </table>
        </div>
        <div class="db-placeHolder">
          <h2>请选择一个仪表盘开始</h2>
        </div>
      </li>
    </ul>
  </div>




</div>

</div>

<script type="text/javascript">
    $(document).ready(init_component);
</script>
