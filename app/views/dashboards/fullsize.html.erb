<div class="dashboard-content" id="dashboard-content">
  <div id="dash-normalsize" class="gridster dash-content">
    <ul class="dashBoard-show" id="dashBoard-show">
    </ul>
  </div>
</div>

<div class="dashboard-content-full" id="dashboard-content-full">
  <div id="full-size-title" class="full-size-title">
    <p class="full-size-label"></p>
    <!--
    <a id="full-size-btn" class="btn full-size-btn"><%= t 'dashboard_group.base.restore'%></a>
    -->
  </div>
  <div id="dash-fullsize" class="gridster black">
    <ul class="dashBoard-show" id="dashBoard-show-full">
      <!--Daily-->
      <li data-sizex="4" data-sizey="1" data-col="1" data-row="1"  class="gs-w" style="display: list-item;"><div id="example-one" class="example-container"></div></li>
      <li data-sizex="4" data-sizey="1" data-col="1" data-row="2" class="gs-w" style="display: list-item;"><div id="example-two" class="example-container"></div></li>
      <li data-sizex="4" data-sizey="1" data-col="1" data-row="3" class="gs-w" style="display: list-item;"><div id="example-three" class="example-container"></div></li>
      <li data-sizex="4" data-sizey="1" data-col="1" data-row="4" class="gs-w" style="display: list-item;"><div id="example-four" class="example-container"></div></li>
      <!--Weekly-->
      <li data-sizex="4" data-sizey="1" data-col="1" data-row="5"  class="gs-w" style="display: list-item;"><div id="example-five" class="example-container"></div></li>
      <li data-sizex="4" data-sizey="1" data-col="1" data-row="6" class="gs-w" style="display: list-item;"><div id="example-six" class="example-container"></div></li>
      <li data-sizex="4" data-sizey="1" data-col="1" data-row="7" class="gs-w" style="display: list-item;"><div id="example-seven" class="example-container"></div></li>
      <li data-sizex="4" data-sizey="1" data-col="1" data-row="8" class="gs-w" style="display: list-item;"><div id="example-eight" class="example-container"></div></li>

      <li data-sizex="4" data-sizey="1" data-col="1" data-row="9"  class="gs-w" style="display: list-item;"><div id="example-9th" class="example-container"></div></li>
      <li data-sizex="4" data-sizey="1" data-col="1" data-row="10" class="gs-w" style="display: list-item;"><div id="example-10th" class="example-container"></div></li>
      <li data-sizex="4" data-sizey="1" data-col="1" data-row="11" class="gs-w" style="display: list-item;"><div id="example-11th" class="example-container"></div></li>
      <li data-sizex="4" data-sizey="1" data-col="1" data-row="12" class="gs-w" style="display: list-item;"><div id="example-12th" class="example-container"></div></li>

      <li data-sizex="4" data-sizey="1" data-col="1" data-row="13"  class="gs-w" style="display: list-item;"><div id="example-13th" class="example-container"></div></li>
      <li data-sizex="4" data-sizey="1" data-col="1" data-row="14" class="gs-w" style="display: list-item;"><div id="example-14th" class="example-container"></div></li>
      <li data-sizex="4" data-sizey="1" data-col="1" data-row="15" class="gs-w" style="display: list-item;"><div id="example-15th" class="example-container"></div></li>

      <li data-sizex="4" data-sizey="1" data-col="1" data-row="16"  class="gs-w" style="display: list-item;"><div id="example-16th" class="example-container"></div></li>
      <li data-sizex="4" data-sizey="1" data-col="1" data-row="17" class="gs-w" style="display: list-item;"><div id="example-17th" class="example-container"></div></li>
      <li data-sizex="4" data-sizey="1" data-col="1" data-row="18" class="gs-w" style="display: list-item;"><div id="example-18th" class="example-container"></div></li>

      <!---->

      <li data-sizex="4" data-sizey="1" data-col="1" data-row="19"  class="gs-w" style="display: list-item;"><div id="example-19th" class="example-container"></div></li>
      <li data-sizex="4" data-sizey="1" data-col="1" data-row="20" class="gs-w" style="display: list-item;"><div id="example-20th" class="example-container"></div></li>
      <li data-sizex="4" data-sizey="1" data-col="1" data-row="21" class="gs-w" style="display: list-item;"><div id="example-21" class="example-container"></div></li>
      <li data-sizex="4" data-sizey="1" data-col="1" data-row="22" class="gs-w" style="display: list-item;"><div id="example-22" class="example-container"></div></li>

      <li data-sizex="4" data-sizey="1" data-col="1" data-row="23"  class="gs-w" style="display: list-item;"><div id="example-23" class="example-container"></div></li>
      <li data-sizex="4" data-sizey="1" data-col="1" data-row="24" class="gs-w" style="display: list-item;"><div id="example-24" class="example-container"></div></li>
      <li data-sizex="4" data-sizey="1" data-col="1" data-row="25" class="gs-w" style="display: list-item;"><div id="example-25" class="example-container"></div></li>
      <li data-sizex="4" data-sizey="1" data-col="1" data-row="26" class="gs-w" style="display: list-item;"><div id="example-26" class="example-container"></div></li>

      <li data-sizex="4" data-sizey="1" data-col="1" data-row="27"  class="gs-w" style="display: list-item;"><div id="example-27" class="example-container"></div></li>
      <li data-sizex="4" data-sizey="1" data-col="1" data-row="28" class="gs-w" style="display: list-item;"><div id="example-28" class="example-container"></div></li>
      <li data-sizex="4" data-sizey="1" data-col="1" data-row="29" class="gs-w" style="display: list-item;"><div id="example-29" class="example-container"></div></li>

      <li data-sizex="4" data-sizey="1" data-col="1" data-row="30"  class="gs-w" style="display: list-item;"><div id="example-30" class="example-container"></div></li>
      <li data-sizex="4" data-sizey="1" data-col="1" data-row="31" class="gs-w" style="display: list-item;"><div id="example-31" class="example-container"></div></li>
      <li data-sizex="4" data-sizey="1" data-col="1" data-row="32" class="gs-w" style="display: list-item;"><div id="example-32" class="example-container"></div></li>

    </ul>
  </div>
</div>

<% content_for :javascript_includes do%>
    <%= javascript_include_tag "2_column_right_nav"%>

    <%= javascript_include_tag "highcharts.js"%>
    <%= javascript_include_tag "highcharts-more.js"%>
    <%= javascript_include_tag "exporting.js"%>
    <%= javascript_include_tag "exporting.extend.src.js"%>
    <%= javascript_include_tag "jquery.gridster.js"%>
    <%= javascript_include_tag "jquery.gridster.with-extras.js"%>

    <%= javascript_include_tag "ifepm.activeSelector.js"%>
    <%= javascript_include_tag "ifepm.text.js"%>
    <%= javascript_include_tag "ifepm.config.js"%>
    <%= javascript_include_tag "dashboard.js"%>
    <%= javascript_include_tag "ifepm.grid.main.js"%>
    <%= javascript_include_tag "ifepm.dashboard.template.js"%>
    <%= javascript_include_tag "ifepm.dashboard.main.js"%>

    <%= javascript_include_tag "high_chart_template.js"%>
    <%= javascript_include_tag "high_chart_theme.js"%>
    <%= javascript_include_tag "Dashboard-add.js"%>
    <%= javascript_include_tag "Dashboard-init.js"%>
    <%= javascript_include_tag "dashboard_type_special.js"%>
    <%= javascript_include_tag "DashboardExampleChart" %>
<%end%>

<script type="text/javascript">
  function fullsize(){
      ifepm.dashboard_widget.init_fullsize();
      on_full_size();
//      $("#dash-fullsize").height()
//      window.setTimeout(function(){
//          var height=$(document).height();
//          $("#dashboard-content-full").css("height",height+"px");
//      },1000)
      //console.log("fullsize");
  }

  //can use destroy
  $(document).ready(function (){
      var args=[
                  {kpi:"E1",departmentArray:["MB","GM","VW","Cutting"],interval:100,everyDay:false,time_range:null},
                  {kpi:"PPM_L",departmentArray:["MB","GM","VW","Cutting"],interval:100,everyDay:false,time_range:null},
                  {kpi:"RFT_L",departmentArray:["MB","GM","VW"],interval:100,everyDay:false,time_range:null},
                  {kpi:"OEE_L",departmentArray:["BU-MB","BU-GM","BU-VW"],interval:100,everyDay:false,time_range:null},
                  //E1 last 7 day
                  {kpi:"E1",departmentArray:['MB'],interval:100,everyDay:true,time_range:"LAST7DAY"},
                  {kpi:"E1",departmentArray:['GM'],interval:100,everyDay:true,time_range:"LAST7DAY"},
                  {kpi:"E1",departmentArray:['VW'],interval:100,everyDay:true,time_range:"LAST7DAY"},
                  {kpi:"E1",departmentArray:['Cutting'],interval:100,everyDay:true,time_range:"LAST7DAY"},
                  //PPM last 7 day
                  {kpi:"PPM_L",departmentArray:['MB'],interval:100,everyDay:true,time_range:"LAST7DAY"},
                  {kpi:"PPM_L",departmentArray:['GM'],interval:100,everyDay:true,time_range:"LAST7DAY"},
                  {kpi:"PPM_L",departmentArray:['VW'],interval:100,everyDay:true,time_range:"LAST7DAY"},
                  {kpi:"PPM_L",departmentArray:['Cutting'],interval:100,everyDay:true,time_range:"LAST7DAY"},
                  //RFT last 7 day
                  {kpi:"RFT_L",departmentArray:['MB'],interval:100,everyDay:true,time_range:"LAST7DAY"},
                  {kpi:"RFT_L",departmentArray:['GM'],interval:100,everyDay:true,time_range:"LAST7DAY"},
                  {kpi:"RFT_L",departmentArray:['VW'],interval:100,everyDay:true,time_range:"LAST7DAY"},
                  //EEO last 7 day
                  {kpi:"OEE_L",departmentArray:['BU-MB'],interval:100,everyDay:true,time_range:"LAST7DAY"},
                  {kpi:"OEE_L",departmentArray:['BU-GM'],interval:100,everyDay:true,time_range:"LAST7DAY"},
                  {kpi:"OEE_L",departmentArray:['BU-VW'],interval:100,everyDay:true,time_range:"LAST7DAY"},
                  //E1 last 4 week
                  {kpi:"E1",departmentArray:['MB'],interval:200,everyDay:true,time_range:"LAST4WEEK"},
                  {kpi:"E1",departmentArray:['GM'],interval:200,everyDay:true,time_range:"LAST4WEEK"},
                  {kpi:"E1",departmentArray:['VW'],interval:200,everyDay:true,time_range:"LAST4WEEK"},
                  {kpi:"E1",departmentArray:['Cutting'],interval:200,everyDay:true,time_range:"LAST4WEEK"},
                  //PPM last 4 week
                  {kpi:"PPM_L",departmentArray:['MB'],interval:200,everyDay:true,time_range:"LAST4WEEK"},
                  {kpi:"PPM_L",departmentArray:['GM'],interval:200,everyDay:true,time_range:"LAST4WEEK"},
                  {kpi:"PPM_L",departmentArray:['VW'],interval:200,everyDay:true,time_range:"LAST4WEEK"},
                  {kpi:"PPM_L",departmentArray:['Cutting'],interval:200,everyDay:true,time_range:"LAST4WEEK"},
                  //RFT last 4 week
                  {kpi:"RFT_L",departmentArray:['MB'],interval:200,everyDay:true,time_range:"LAST4WEEK"},
                  {kpi:"RFT_L",departmentArray:['GM'],interval:200,everyDay:true,time_range:"LAST4WEEK"},
                  {kpi:"RFT_L",departmentArray:['VW'],interval:200,everyDay:true,time_range:"LAST4WEEK"},
                  //EEO last 4 week
                  {kpi:"OEE_L",departmentArray:['BU-MB'],interval:200,everyDay:true,time_range:"LAST4WEEK"},
                  {kpi:"OEE_L",departmentArray:['BU-GM'],interval:200,everyDay:true,time_range:"LAST4WEEK"},
                  {kpi:"OEE_L",departmentArray:['BU-VW'],interval:200,everyDay:true,time_range:"LAST4WEEK"},


              ], i,
              $targets=$("#dashBoard-show-full").find(".example-container");

//      var KPIArray=[ "E1","PPM_L","RFT_L","OEE_L","E1","PPM_L","RFT_L","OEE_L","E1","PPM_L","RFT_L","OEE_L"],
//              i,
//              departmentArray={
//                  "0":["MB","GM","VW","Cutting"],
//                  "1":["MB","GM","VW","Cutting"],
//                  "2":["MB","GM","VW"],
//                  "3":["BU-MB","BU-GM","BU-VW"],
//                  "4":["MB","GM","VW","Cutting"],
//                  "5":["MB","GM","VW","Cutting"],
//                  "6":["MB","GM","VW"],
//                  "7":["BU-MB","BU-GM","BU-VW"],
//                  "8":["MB","GM","VW","Cutting"],
//                  "9":["MB","GM","VW","Cutting"],
//                  "10":["MB","GM","VW"],
//                  "11":["BU-MB","BU-GM","BU-VW"]
//              },
//              intervalArray=[100,100,100,100,200,200,200,200,300,300,300,300],
//              $targets=$("#dashBoard-show-full").find(".example-container");

      for(i=0;i<args.length;i++){
          (function(i){
              var item=args[i];
              if(!item.everyDay){
                  $.get("/dashboard_items/fake_data",
                          {kpi:item.kpi,department:item.departmentArray,interval:item.interval},
                          function(data){
                              var height=function(i){
                                  if($targets.eq(i).parents(".gs-w").height()===0){
                                      return height(++i);
                                  }
                                  else{
                                      return $targets.eq(i).parents(".gs-w").height();
                                  }
                              }
                              if($targets.eq(i).highcharts()){
                                  $targets.eq(i).highcharts().destroy();
                              }
                              var boolPPM=item.kpi.indexOf("PPM");
                              var option={
                                  height:height(i),
                                  target:$targets.eq(i).attr("id"),
                                  kpi:data.title,
                                  date:data.time,
                                  departmentArray:data.axis,
                                  currentArray:data.value,
                                  targetArray:data.target,
                                  ppm:boolPPM===-1?0:1,
                                  targetLine:false
                              };
                              var one=new DashBoardExampleChart(option);
                              one.init();
                          }
                  )
              }
              else{
                  $.get("/dashboard_items/fake_data_time",
                          {kpi:item.kpi,department:item.departmentArray[0],interval:item.interval,time_range:item.time_range},
                          function(data){
                              var height=function(i){
                                  if($targets.eq(i).parents(".gs-w").height()===0){
                                      return height(++i);
                                  }
                                  else{
                                      return $targets.eq(i).parents(".gs-w").height();
                                  }
                              }
                              if($targets.eq(i).highcharts()){
                                  $targets.eq(i).highcharts().destroy();
                              }
                              var boolPPM=item.kpi.indexOf("PPM");
                              var option={
                                  height:height(i),
                                  target:$targets.eq(i).attr("id"),
                                  kpi:data.title,
                                  date:data.time,
                                  departmentArray:data.axis,
                                  currentArray:data.value,
                                  targetArray:data.target,
                                  ppm:boolPPM===-1?0:1,
                                  targetLine:true
                              };
                              var one=new DashBoardExampleChart(option);
                              one.init();
                          }
                  )
              }
          })(i);

      }
      init_component();
      //DASHBOARD.init();
      right_nav_main.init();
      $("#dashboard-content-full").css("display","block");
      DASHBOARD.add.init();
      fullsize();
      //current_dashboard_id = $("#dashboard-content-full").attr("dashboard-id");
      //select_dashboard(current_dashboard_id,fullsize);
      //current_dashboard_name = $("#dashboard-content-full").attr("dashboard-name");

  });
</script>
