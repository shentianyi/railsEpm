0 info it worked if it ends with ok
1 verbose cli [ 'node',
1 verbose cli   '/usr/local/bin/npm',
1 verbose cli   'install',
1 verbose cli   'spm-chaos-build',
1 verbose cli   '-g' ]
2 info using npm@1.3.17
3 info using node@v0.10.23
4 verbose cache add [ 'spm-chaos-build', null ]
5 verbose cache add name=undefined spec="spm-chaos-build" args=["spm-chaos-build",null]
6 verbose parsed url { protocol: null,
6 verbose parsed url   slashes: null,
6 verbose parsed url   auth: null,
6 verbose parsed url   host: null,
6 verbose parsed url   port: null,
6 verbose parsed url   hostname: null,
6 verbose parsed url   hash: null,
6 verbose parsed url   search: null,
6 verbose parsed url   query: null,
6 verbose parsed url   pathname: 'spm-chaos-build',
6 verbose parsed url   path: 'spm-chaos-build',
6 verbose parsed url   href: 'spm-chaos-build' }
7 silly lockFile 767d3378-spm-chaos-build spm-chaos-build
8 verbose lock spm-chaos-build /Users/wayne/.npm/767d3378-spm-chaos-build.lock
9 silly lockFile 767d3378-spm-chaos-build spm-chaos-build
10 silly lockFile 767d3378-spm-chaos-build spm-chaos-build
11 verbose addNamed [ 'spm-chaos-build', '' ]
12 verbose addNamed [ null, '*' ]
13 silly lockFile 34bdd7b6-spm-chaos-build spm-chaos-build@
14 verbose lock spm-chaos-build@ /Users/wayne/.npm/34bdd7b6-spm-chaos-build.lock
15 silly addNameRange { name: 'spm-chaos-build', range: '*', hasData: false }
16 verbose url raw spm-chaos-build
17 verbose url resolving [ 'https://registry.npmjs.org/', './spm-chaos-build' ]
18 verbose url resolved https://registry.npmjs.org/spm-chaos-build
19 info trying registry request attempt 1 at 16:39:46
20 http GET https://registry.npmjs.org/spm-chaos-build
21 http 200 https://registry.npmjs.org/spm-chaos-build
22 silly registry.get cb [ 200,
22 silly registry.get   { date: 'Thu, 04 Sep 2014 08:39:48 GMT',
22 silly registry.get     server: 'CouchDB/1.5.0 (Erlang OTP/R16B03)',
22 silly registry.get     etag: '"DEY85H7XMLS6H7SIBQBOXW6AI"',
22 silly registry.get     'content-type': 'application/json',
22 silly registry.get     'cache-control': 'max-age=60',
22 silly registry.get     'content-length': '26287',
22 silly registry.get     'accept-ranges': 'bytes',
22 silly registry.get     via: '1.1 varnish',
22 silly registry.get     age: '0',
22 silly registry.get     'x-served-by': 'cache-ty67-TYO',
22 silly registry.get     'x-cache': 'MISS',
22 silly registry.get     'x-cache-hits': '0',
22 silly registry.get     'x-timer': 'S1409819987.798820,VS0,VE380',
22 silly registry.get     vary: 'Accept',
22 silly registry.get     'keep-alive': 'timeout=10, max=50',
22 silly registry.get     connection: 'Keep-Alive' } ]
23 silly addNameRange number 2 { name: 'spm-chaos-build', range: '*', hasData: true }
24 silly addNameRange versions [ 'spm-chaos-build',
24 silly addNameRange   [ '0.1.0',
24 silly addNameRange     '0.1.1',
24 silly addNameRange     '0.1.2',
24 silly addNameRange     '0.1.3',
24 silly addNameRange     '0.1.4',
24 silly addNameRange     '0.1.5',
24 silly addNameRange     '0.1.6',
24 silly addNameRange     '0.1.7',
24 silly addNameRange     '0.1.8',
24 silly addNameRange     '0.1.9',
24 silly addNameRange     '0.1.10',
24 silly addNameRange     '0.2.0',
24 silly addNameRange     '0.2.1',
24 silly addNameRange     '0.2.2',
24 silly addNameRange     '0.2.3',
24 silly addNameRange     '0.2.4',
24 silly addNameRange     '0.2.5' ] ]
25 verbose addNamed [ 'spm-chaos-build', '0.2.5' ]
26 verbose addNamed [ '0.2.5', '0.2.5' ]
27 silly lockFile ca7789cc-spm-chaos-build-0-2-5 spm-chaos-build@0.2.5
28 verbose lock spm-chaos-build@0.2.5 /Users/wayne/.npm/ca7789cc-spm-chaos-build-0-2-5.lock
29 silly lockFile 19d13e4c--build-spm-chaos-build-0-2-5-tgz https://registry.npmjs.org/spm-chaos-build/-/spm-chaos-build-0.2.5.tgz
30 verbose lock https://registry.npmjs.org/spm-chaos-build/-/spm-chaos-build-0.2.5.tgz /Users/wayne/.npm/19d13e4c--build-spm-chaos-build-0-2-5-tgz.lock
31 verbose addRemoteTarball [ 'https://registry.npmjs.org/spm-chaos-build/-/spm-chaos-build-0.2.5.tgz',
31 verbose addRemoteTarball   'e5d7be8e97c4c06172f8f46b41b35257b8cd5a39' ]
32 info retry fetch attempt 1 at 16:39:48
33 verbose fetch to= /var/folders/g7/5pxj4tts5tg8pbr37lzg6v780000gn/T/npm-45488-U8BsLfnn/1409819988058-0.23507555783726275/tmp.tgz
34 http GET https://registry.npmjs.org/spm-chaos-build/-/spm-chaos-build-0.2.5.tgz
35 http 200 https://registry.npmjs.org/spm-chaos-build/-/spm-chaos-build-0.2.5.tgz
36 verbose tar unpack /var/folders/g7/5pxj4tts5tg8pbr37lzg6v780000gn/T/npm-45488-U8BsLfnn/1409819988058-0.23507555783726275/tmp.tgz
37 silly lockFile 7eacc2ba-8058-0-23507555783726275-package tar:///var/folders/g7/5pxj4tts5tg8pbr37lzg6v780000gn/T/npm-45488-U8BsLfnn/1409819988058-0.23507555783726275/package
38 verbose lock tar:///var/folders/g7/5pxj4tts5tg8pbr37lzg6v780000gn/T/npm-45488-U8BsLfnn/1409819988058-0.23507555783726275/package /Users/wayne/.npm/7eacc2ba-8058-0-23507555783726275-package.lock
39 silly lockFile 48e5814e-8058-0-23507555783726275-tmp-tgz tar:///var/folders/g7/5pxj4tts5tg8pbr37lzg6v780000gn/T/npm-45488-U8BsLfnn/1409819988058-0.23507555783726275/tmp.tgz
40 verbose lock tar:///var/folders/g7/5pxj4tts5tg8pbr37lzg6v780000gn/T/npm-45488-U8BsLfnn/1409819988058-0.23507555783726275/tmp.tgz /Users/wayne/.npm/48e5814e-8058-0-23507555783726275-tmp-tgz.lock
41 silly gunzTarPerm modes [ '755', '644' ]
42 silly gunzTarPerm extractEntry package.json
43 silly gunzTarPerm extractEntry .npmignore
44 silly gunzTarPerm extractEntry README.md
45 silly gunzTarPerm extractEntry LICENCE
46 silly gunzTarPerm extractEntry index.js
47 silly gunzTarPerm extractEntry .gitattributes
48 silly gunzTarPerm extractEntry lib/config.js
49 silly gunzTarPerm extractEntry bin/spm-chaos-build
50 silly gunzTarPerm extractEntry scripts/postinstall.js
51 silly gunzTarPerm extractEntry scripts/uninstall.js
52 silly gunzTarPerm extractEntry tasks/build.js
53 silly gunzTarPerm extractEntry tasks/map.tpl
54 silly gunzTarPerm extractEntry tests/chaos-build.test.js
55 silly lockFile 7eacc2ba-8058-0-23507555783726275-package tar:///var/folders/g7/5pxj4tts5tg8pbr37lzg6v780000gn/T/npm-45488-U8BsLfnn/1409819988058-0.23507555783726275/package
56 silly lockFile 7eacc2ba-8058-0-23507555783726275-package tar:///var/folders/g7/5pxj4tts5tg8pbr37lzg6v780000gn/T/npm-45488-U8BsLfnn/1409819988058-0.23507555783726275/package
57 silly lockFile 48e5814e-8058-0-23507555783726275-tmp-tgz tar:///var/folders/g7/5pxj4tts5tg8pbr37lzg6v780000gn/T/npm-45488-U8BsLfnn/1409819988058-0.23507555783726275/tmp.tgz
58 silly lockFile 48e5814e-8058-0-23507555783726275-tmp-tgz tar:///var/folders/g7/5pxj4tts5tg8pbr37lzg6v780000gn/T/npm-45488-U8BsLfnn/1409819988058-0.23507555783726275/tmp.tgz
59 verbose tar pack [ '/Users/wayne/.npm/spm-chaos-build/0.2.5/package.tgz',
59 verbose tar pack   '/var/folders/g7/5pxj4tts5tg8pbr37lzg6v780000gn/T/npm-45488-U8BsLfnn/1409819988058-0.23507555783726275/package' ]
60 verbose tarball /Users/wayne/.npm/spm-chaos-build/0.2.5/package.tgz
61 verbose folder /var/folders/g7/5pxj4tts5tg8pbr37lzg6v780000gn/T/npm-45488-U8BsLfnn/1409819988058-0.23507555783726275/package
62 silly lockFile 7eacc2ba-8058-0-23507555783726275-package tar:///var/folders/g7/5pxj4tts5tg8pbr37lzg6v780000gn/T/npm-45488-U8BsLfnn/1409819988058-0.23507555783726275/package
63 verbose lock tar:///var/folders/g7/5pxj4tts5tg8pbr37lzg6v780000gn/T/npm-45488-U8BsLfnn/1409819988058-0.23507555783726275/package /Users/wayne/.npm/7eacc2ba-8058-0-23507555783726275-package.lock
64 silly lockFile a9515d03-pm-chaos-build-0-2-5-package-tgz tar:///Users/wayne/.npm/spm-chaos-build/0.2.5/package.tgz
65 verbose lock tar:///Users/wayne/.npm/spm-chaos-build/0.2.5/package.tgz /Users/wayne/.npm/a9515d03-pm-chaos-build-0-2-5-package-tgz.lock
66 silly lockFile 7eacc2ba-8058-0-23507555783726275-package tar:///var/folders/g7/5pxj4tts5tg8pbr37lzg6v780000gn/T/npm-45488-U8BsLfnn/1409819988058-0.23507555783726275/package
67 silly lockFile 7eacc2ba-8058-0-23507555783726275-package tar:///var/folders/g7/5pxj4tts5tg8pbr37lzg6v780000gn/T/npm-45488-U8BsLfnn/1409819988058-0.23507555783726275/package
68 silly lockFile a9515d03-pm-chaos-build-0-2-5-package-tgz tar:///Users/wayne/.npm/spm-chaos-build/0.2.5/package.tgz
69 silly lockFile a9515d03-pm-chaos-build-0-2-5-package-tgz tar:///Users/wayne/.npm/spm-chaos-build/0.2.5/package.tgz
70 silly lockFile ab37fba0-pm-spm-chaos-build-0-2-5-package /Users/wayne/.npm/spm-chaos-build/0.2.5/package
71 verbose lock /Users/wayne/.npm/spm-chaos-build/0.2.5/package /Users/wayne/.npm/ab37fba0-pm-spm-chaos-build-0-2-5-package.lock
72 silly lockFile ab37fba0-pm-spm-chaos-build-0-2-5-package /Users/wayne/.npm/spm-chaos-build/0.2.5/package
73 silly lockFile ab37fba0-pm-spm-chaos-build-0-2-5-package /Users/wayne/.npm/spm-chaos-build/0.2.5/package
74 verbose tar unpack /Users/wayne/.npm/spm-chaos-build/0.2.5/package.tgz
75 silly lockFile f6462f6c-pm-spm-chaos-build-0-2-5-package tar:///Users/wayne/.npm/spm-chaos-build/0.2.5/package
76 verbose lock tar:///Users/wayne/.npm/spm-chaos-build/0.2.5/package /Users/wayne/.npm/f6462f6c-pm-spm-chaos-build-0-2-5-package.lock
77 silly lockFile a9515d03-pm-chaos-build-0-2-5-package-tgz tar:///Users/wayne/.npm/spm-chaos-build/0.2.5/package.tgz
78 verbose lock tar:///Users/wayne/.npm/spm-chaos-build/0.2.5/package.tgz /Users/wayne/.npm/a9515d03-pm-chaos-build-0-2-5-package-tgz.lock
79 silly gunzTarPerm modes [ '755', '644' ]
80 silly gunzTarPerm extractEntry package.json
81 silly gunzTarPerm extractEntry .npmignore
82 silly gunzTarPerm extractEntry README.md
83 silly gunzTarPerm extractEntry LICENCE
84 silly gunzTarPerm extractEntry index.js
85 silly gunzTarPerm extractEntry .gitattributes
86 silly gunzTarPerm extractEntry lib/config.js
87 silly gunzTarPerm extractEntry bin/spm-chaos-build
88 silly gunzTarPerm extractEntry scripts/postinstall.js
89 silly gunzTarPerm extractEntry scripts/uninstall.js
90 silly gunzTarPerm extractEntry tasks/build.js
91 silly gunzTarPerm extractEntry tasks/map.tpl
92 silly gunzTarPerm extractEntry tests/chaos-build.test.js
93 silly lockFile f6462f6c-pm-spm-chaos-build-0-2-5-package tar:///Users/wayne/.npm/spm-chaos-build/0.2.5/package
94 silly lockFile f6462f6c-pm-spm-chaos-build-0-2-5-package tar:///Users/wayne/.npm/spm-chaos-build/0.2.5/package
95 silly lockFile a9515d03-pm-chaos-build-0-2-5-package-tgz tar:///Users/wayne/.npm/spm-chaos-build/0.2.5/package.tgz
96 silly lockFile a9515d03-pm-chaos-build-0-2-5-package-tgz tar:///Users/wayne/.npm/spm-chaos-build/0.2.5/package.tgz
97 verbose chmod /Users/wayne/.npm/spm-chaos-build/0.2.5/package.tgz 644
98 verbose chown /Users/wayne/.npm/spm-chaos-build/0.2.5/package.tgz [ 501, 20 ]
99 silly lockFile 19d13e4c--build-spm-chaos-build-0-2-5-tgz https://registry.npmjs.org/spm-chaos-build/-/spm-chaos-build-0.2.5.tgz
100 silly lockFile 19d13e4c--build-spm-chaos-build-0-2-5-tgz https://registry.npmjs.org/spm-chaos-build/-/spm-chaos-build-0.2.5.tgz
101 silly lockFile ca7789cc-spm-chaos-build-0-2-5 spm-chaos-build@0.2.5
102 silly lockFile ca7789cc-spm-chaos-build-0-2-5 spm-chaos-build@0.2.5
103 silly lockFile 34bdd7b6-spm-chaos-build spm-chaos-build@
104 silly lockFile 34bdd7b6-spm-chaos-build spm-chaos-build@
105 silly resolved [ { name: 'spm-chaos-build',
105 silly resolved     description: 'Build Sea.js Business Modules by Chaos\'s way.',
105 silly resolved     version: '0.2.5',
105 silly resolved     homepage: 'https://github.com/edokeh/spm-chaos-build',
105 silly resolved     repository:
105 silly resolved      { type: 'git',
105 silly resolved        url: 'git://github.com/edokeh/spm-chaos-build.git' },
105 silly resolved     bugs: { url: 'https://github.com/edokeh/spm-chaos-build/issues' },
105 silly resolved     licenses: [ [Object] ],
105 silly resolved     bin: { 'spm-chaos-build': 'bin/spm-chaos-build' },
105 silly resolved     keywords: [ 'spmplugin' ],
105 silly resolved     scripts:
105 silly resolved      { postinstall: 'node scripts/postinstall.js',
105 silly resolved        uninstall: 'node scripts/uninstall.js' },
105 silly resolved     dependencies:
105 silly resolved      { 'grunt-cmd-transport': '~0.4.1',
105 silly resolved        'grunt-cmd-concat': '~0.2.7',
105 silly resolved        'grunt-contrib-uglify': '~0.3.2',
105 silly resolved        'grunt-contrib-copy': '~0.5.0',
105 silly resolved        'grunt-contrib-cssmin': '~0.6.2',
105 silly resolved        'grunt-contrib-clean': '~0.5.0',
105 silly resolved        'grunt-contrib-compress': '~0.6.0',
105 silly resolved        'grunt-md5': '~0.1.10',
105 silly resolved        'spm-grunt': '~0.1.7',
105 silly resolved        commander: '~2.1.0' },
105 silly resolved     readme: '# spm-chaos-build\n\n> Build Sea.js Business Modules by Chaos\'s way.\n\n-----\n\n## Getting Started\n\n这是一个 Spm2 的插件，使用一种自定义的方式来打包 (build) 业务模块（不是标准模块哦）\n\n打包的方式请参见[如何使用 Spm2 压缩合并业务模块](http://chaoskeh.com/blog/how-to-build-seajs-business-module-by-spm2.html)\n\n一个简单的例子参见这里 https://github.com/edokeh/spm-chaos-build-example\n\n## Install\n\n请先确保你已经安装了最新的 Node.js\n\n    $ npm install spm -g\n    $ npm install spm-chaos-build -g\n\n## Usage\n\n    $ spm chaos-build [dir] [options]\n\nOptions\n\n* **-C**         指定 Sea.js 的配置文件，build 完成后会将 MD5 的 MAP 规则写入这个文件\n* **-O**         指定 build 的输出目录，这个目录应该是 Sea.js 的标准模块目录，里面应该包含业务代码所依赖的标准模块（如 jQuery），可省略此参数，缺省为 sea-modules 目录\n* **--gzip**  是否压缩输出目录下所有的文件，参数接受 all/current ，分别表示压缩输出目录下所有文件或只压缩此次生成的文件\n \n### Example\n    \n    $ spm chaos-build example -C seajs-config.js\n    $ spm chaos-build example -C seajs-config.js --gzip current\n    $ spm chaos-build example -C seajs-config.js -O ../modules\n    $ spm chaos-build example -C seajs-config.js -O libs --gzip all\n    \n    \n## 自定义任务\n\n与 spm build 一样，支持通过目录下的 Gruntfile.js 来自定义任务，示例代码如下\n\n```javascript\nvar chaosBuild = require(\'spm-chaos-build\');\n\nmodule.exports = function (grunt) {\n    chaosBuild.loadTasks(grunt);\n\n    var config = chaosBuild.getConfig(\'javascripts\', {\n        outputDirectory : \'javascripts/sea-modules\',\n        gzip : \'all\'\n    });\n    grunt.initConfig(config);\n\n    grunt.registerTask(\'write-manifest\', function () {\n        var mapArr = grunt.config.get(\'md5map\');\n        var family = config.family;\n        grunt.file.write(\'seajs-map.json\', JSON.stringify(mapArr, null, \'\\t\'));\n    });\n\n    grunt.registerTask(\'chaos-build\', [\n        \'clean:dist\', // delete dist direcotry first\n        \'transport:spm\',  // src/* -> .build/src/*\n        \'concat:relative\',  // .build/src/* -> .build/dist/*.js\n        \'concat:all\',\n        \'uglify:js\',  // .build/dist/*.js -> .build/dist/*.js\n        \'md5:js\', // .build/dist/*.js -> dist/*-md5.js\n        \'clean:spm\',\n        \'spm-newline\',\n        \'compress\',\n        \'write-manifest\'\n    ]);\n};\n```\n\n从 0.2.4 开始支持更细粒度的 concat 配置，如\n\n```javascript\nvar config = chaosBuild.getConfig(\'javascripts\', {\n    outputDirectory : \'javascripts/sea-modules\',\n    gzip : \'all\'\n});\nconfig.concat.relative = [\n  "test/a.js",\n  {"test/b.js": ["test/b.js", "template/*.html.js"]},\n  "test/c.js"\n];\n```\n\n## History\n\n### 0.2.5\n\nFix bug\n\n### 0.2.4\n\n* 支持更细粒度的 concat 规则配置\n* 将依赖的 grunt-cmd-transport， grunt-cmd-concat 更新至最新版本\n\n### 0.2.3\n* 将依赖的 grunt-cmd-transport， grunt-cmd-concat 更新至最新版本\n* 默认支持对 handlebars 后缀文件的打包支持，规则同 grunt-cmd-transport ，如需指定 handlebars 的模块 ID ，可以在 package.json 的 spm.alias 中配置\n\n### 0.2.0\n* 如果你不喜欢目录的名字，可以在 package.json 中增加 family 项\n* 支持输出目录位于业务模块目录内\n* 支持 Gruntfile 的自定义任务\n',
105 silly resolved     readmeFilename: 'README.md',
105 silly resolved     _id: 'spm-chaos-build@0.2.5',
105 silly resolved     dist: { shasum: '14a9b14fbfe28ecf83c81cce4a713226ab9396c0' },
105 silly resolved     _from: 'spm-chaos-build@',
105 silly resolved     _resolved: 'https://registry.npmjs.org/spm-chaos-build/-/spm-chaos-build-0.2.5.tgz' } ]
106 info install spm-chaos-build@0.2.5 into /usr/local/lib
107 info installOne spm-chaos-build@0.2.5
108 info /usr/local/lib/node_modules/spm-chaos-build unbuild
109 verbose tar unpack /Users/wayne/.npm/spm-chaos-build/0.2.5/package.tgz
110 silly lockFile 26f7ddc1-lib-node-modules-spm-chaos-build tar:///usr/local/lib/node_modules/spm-chaos-build
111 verbose lock tar:///usr/local/lib/node_modules/spm-chaos-build /Users/wayne/.npm/26f7ddc1-lib-node-modules-spm-chaos-build.lock
112 silly lockFile a9515d03-pm-chaos-build-0-2-5-package-tgz tar:///Users/wayne/.npm/spm-chaos-build/0.2.5/package.tgz
113 verbose lock tar:///Users/wayne/.npm/spm-chaos-build/0.2.5/package.tgz /Users/wayne/.npm/a9515d03-pm-chaos-build-0-2-5-package-tgz.lock
114 silly gunzTarPerm modes [ '755', '644' ]
115 error Error: EACCES, mkdir '/usr/local/lib/node_modules/spm-chaos-build'
115 error  { [Error: EACCES, mkdir '/usr/local/lib/node_modules/spm-chaos-build']
115 error   errno: 3,
115 error   code: 'EACCES',
115 error   path: '/usr/local/lib/node_modules/spm-chaos-build',
115 error   fstream_type: 'Directory',
115 error   fstream_path: '/usr/local/lib/node_modules/spm-chaos-build',
115 error   fstream_class: 'DirWriter',
115 error   fstream_stack:
115 error    [ '/usr/local/lib/node_modules/npm/node_modules/fstream/lib/dir-writer.js:36:23',
115 error      '/usr/local/lib/node_modules/npm/node_modules/mkdirp/index.js:37:53',
115 error      'Object.oncomplete (fs.js:107:15)' ] }
116 error Please try running this command again as root/Administrator.
117 error System Darwin 13.2.0
118 error command "node" "/usr/local/bin/npm" "install" "spm-chaos-build" "-g"
119 error cwd /Users/wayne/Documents/Project/railsEpm
120 error node -v v0.10.23
121 error npm -v 1.3.17
122 error path /usr/local/lib/node_modules/spm-chaos-build
123 error fstream_path /usr/local/lib/node_modules/spm-chaos-build
124 error fstream_type Directory
125 error fstream_class DirWriter
126 error code EACCES
127 error errno 3
128 error stack Error: EACCES, mkdir '/usr/local/lib/node_modules/spm-chaos-build'
129 error fstream_stack /usr/local/lib/node_modules/npm/node_modules/fstream/lib/dir-writer.js:36:23
129 error fstream_stack /usr/local/lib/node_modules/npm/node_modules/mkdirp/index.js:37:53
129 error fstream_stack Object.oncomplete (fs.js:107:15)
130 verbose exit [ 3, true ]
